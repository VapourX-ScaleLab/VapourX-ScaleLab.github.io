---
import { Button } from 'astro-pure/user'
import { cn } from 'astro-pure/utils'
import PageLayout from '@/layouts/BaseLayout.astro'

import { getTagCounts } from '@/utils/members'

// 统计所有标签及其出现次数
const tagCounts = getTagCounts()
const allTags = Array.from(tagCounts.entries()).sort((a, b) => b[1] - a[1])

const meta = {
  description: "查看社区成员的专业领域和技能标签",
  title: '人员标签'
}
---

<PageLayout {meta}>
  <Button title='Back' href='/peoples' style='back' />
  <main class='mt-6 lg:mt-10'>
    <div class='mx-auto max-w-4xl'>
      <div id='content-header' class='animate'>
        <h1 class='mb-6 text-3xl font-medium'>人员标签</h1>
      </div>

      <div id='content' class='animate'>
        {
          allTags.length > 0 ? (
            <ul class='flex flex-wrap gap-4 list-none pl-0'>
              {allTags.map(([tag, count]) => (
                <li>
                  <Button
                    href={`/peoples/tags/${encodeURIComponent(tag)}`}
                    style='pill'
                    class={cn(
                      'items-start gap-x-1',
                      count > 2 ? 'rounded-xl px-3 py-1 text-xl' : count > 1 && 'text-lg'
                    )}
                  >
                    {tag}
                    <span class={count > 2 ? 'text-base' : 'text-xs'}>{count}</span>
                  </Button>
                </li>
              ))}
            </ul>
          ) : (
            <p class='text-muted-foreground'>暂无标签。</p>
          )}
      </div>
    </div>
  </main>
</PageLayout> 