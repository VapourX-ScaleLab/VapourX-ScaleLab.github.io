---
import { Image } from 'astro:assets'
import { Button } from 'astro-pure/user'
import PageLayout from '@/layouts/CommonPage.astro'
import avatar from '@/assets/vapourx-logo-trans.png'
import Icon from '@/components/custom/Icon.astro'

const headings = [
  { depth: 2, slug: 'core-members', text: '核心成员' },
  { depth: 2, slug: 'community-members', text: '社区成员' }
]

import { getAllMembers } from '@/utils/members'

const members = getAllMembers().map(member => ({
  id: member.id,
  name: member.name,
  avatar: member.avatar,
  organization: member.organization,
  role: member.role,
  slogan: member.slogan,
  href: `/peoples/${member.id}`,
  description: member.description,
  github: member.github,
  website: member.website,
  email: member.email,
  linkedin: member.linkedin,
  bilibili: member.bilibili,
  behance: member.behance,
  dribbble: member.dribbble,
  xiaohongshu: member.xiaohongshu,
  x: member.x,
  instagram: member.instagram
}))
---

<PageLayout title='社区成员' {headings} info='/peoples'>
  <div class='mx-auto max-w-4xl'>
    <!-- 页面标题 -->
    <div class='mb-8 text-center'>
      <h1 class='mb-4 text-4xl font-bold text-foreground'>社区成员</h1>
      <p class='text-lg text-muted-foreground'>
        认识 VapourX 社区的优秀成员，了解他们的专业领域和贡献
      </p>
    </div>

    <!-- 核心成员 -->
    <section id='core-members' class='mb-12 scroll-mt-20'>
      <h2 class='mb-6 text-2xl font-semibold text-foreground'>核心成员</h2>
      <div class='grid gap-6 md:grid-cols-2'>
        {members.slice(0, 4).map((member) => (
          <div class='group rounded-lg border p-6 transition-all hover:shadow-lg'>
            <div class='flex items-start gap-4'>
              {/* 头像 */}
              <div class='flex-shrink-0'>
                <div class='relative'>
                  <img 
                    src={member.avatar} 
                    alt={member.name} 
                    class='h-16 w-16 rounded-full border-2 border-border object-cover'
                    width={64}
                    height={64}
                  />
                  <div class='absolute -bottom-1 -right-1 size-4 rounded-full border-2 border-background bg-green-500'></div>
                </div>
              </div>
              
              {/* 成员信息 */}
              <div class='flex-1 min-w-0'>
                <div class='mb-2'>
                  <h3 class='text-lg font-semibold text-foreground md:-mt-[0.5px]'>{member.name}</h3>
                  <p class='text-sm text-muted-foreground'>{member.organization}</p>
                  <p class='text-sm text-primary font-medium'>{member.role}</p>
                </div>
                
                <p class='mb-3 text-sm text-muted-foreground italic'>"{member.slogan}"</p>
                
                <p class='mb-3 text-sm text-muted-foreground'>{member.description}</p>

                {/* 社交链接 */}
                <div class='mb-4 flex flex-wrap gap-2'>
                  {member.github && (
                    <Button href={member.github} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="github" class="w-4 h-4" />
                      GitHub
                    </Button>
                  )}
                  {member.website && (
                    <Button href={member.website} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="earth" class="w-4 h-4" />
                      个人网站
                    </Button>
                  )}
                  {member.email && (
                    <Button href={`mailto:${member.email}`} style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="email" class="w-4 h-4" />
                      邮箱
                    </Button>
                  )}
                  {member.bilibili && (
                    <Button href={member.bilibili} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="bilibili" class="w-4 h-4" />
                      Bilibili
                    </Button>
                  )}
                  {member.linkedin && (
                    <Button href={member.linkedin} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="link" class="w-4 h-4" />
                      LinkedIn
                    </Button>
                  )}
                  {member.dribbble && (
                    <Button href={member.dribbble} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="link" class="w-4 h-4" />
                      Dribbble
                    </Button>
                  )}
                  {member.behance && (
                    <Button href={member.behance} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="link" class="w-4 h-4" />
                      Behance
                    </Button>
                  )}
                  {member.xiaohongshu && (
                    <Button href={member.xiaohongshu} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="link" class="w-4 h-4" />
                      小红书
                    </Button>
                  )}
                  {member.x && (
                    <Button href={member.x} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="x" class="w-4 h-4" />
                      X
                    </Button>
                  )}
                  {member.instagram && (
                    <Button href={member.instagram} target='_blank' style='outline' class='inline-flex items-center gap-1 text-xs'>
                      <Icon name="link" class="w-4 h-4" />
                      Instagram
                    </Button>
                  )}
                </div>
                
                <Button href={member.href} style='primary' class='text-sm'>
                  查看个人主页
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- 社区成员统计 -->
    <section id='community-members' class='scroll-mt-20'>
      <h2 class='mb-6 text-2xl font-semibold text-foreground'>社区成员</h2>
      <div class='rounded-lg border bg-muted p-6'>
        <div class='grid gap-4 md:grid-cols-3'>
          <div class='text-center'>
            <div class='text-2xl font-bold text-primary'>4</div>
            <div class='text-sm text-muted-foreground'>核心成员</div>
          </div>
          <div class='text-center'>
            <div class='text-2xl font-bold text-primary'>12+</div>
            <div class='text-sm text-muted-foreground'>活跃贡献者</div>
          </div>
          <div class='text-center'>
            <div class='text-2xl font-bold text-primary'>50+</div>
            <div class='text-sm text-muted-foreground'>社区成员</div>
          </div>
        </div>
        <div class='mt-4 text-center'>
          <Button href='/peoples/tags' style='outline' class='text-sm'>
            按标签浏览成员
          </Button>
        </div>
      </div>
    </section>
  </div>
</PageLayout> 