---
import { cn } from 'astro-pure/utils'

const { class: className, hideComment, path: customPath, ...props } = Astro.props

const path = customPath || Astro.url.pathname
---

<div class={cn('text-base text-sm text-muted-foreground', className)} {...props}>
  <span id="busuanzi_container_page_pv" style="display: inline !important; visibility: visible !important; opacity: 1 !important;">
    <span id="busuanzi_value_page_pv"></span> views
  </span>
  {/* 已按用户要求移除评论数统计显示 */}
</div>

<script>
  // 强制显示不蒜子统计
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('busuanzi_container_page_pv');
    if (container) {
      container.style.display = 'inline';
      container.style.visibility = 'visible';
      container.style.opacity = '1';
    }
  });
  
  // 监听不蒜子脚本加载完成后的变化
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
        const container = document.getElementById('busuanzi_container_page_pv');
        if (container && container.style.display === 'none') {
          container.style.display = 'inline';
          container.style.visibility = 'visible';
          container.style.opacity = '1';
        }
      }
    });
  });
  
  // 开始观察
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('busuanzi_container_page_pv');
    if (container) {
      observer.observe(container, { attributes: true, attributeFilter: ['style'] });
    }
  });
</script>
